language: cpp
os:
  - osx
osx_image: xcode11.3

compiler:
  - clang

install:
  - brew install lcov
  - pip3 install cpp-coveralls

script:
  - cd Receiver
  - ./build.sh debug

after_success:
  - coveralls -r $PWD/Receiver/build_debug --gcov-options '\-lp' -E ".*CMakeFiles.*"
    # -e usr \
    # -e .cache \
    # -e unit_tests_ \
    # -e googletest \
    # -e .framework \
    # -e Xcode.app \
    # -e moc \
    # -e moc_

notifications:
  email:
    on_success: change
    on_failure: always
